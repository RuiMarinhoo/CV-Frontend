<div class="card h-100">
  <div class="card-body">
    <div class="d-flex align-items-center justify-content-between mb-2 pb-1">
      <div class="d-flex align-items-center">
        <div class="avatar me-2">
          <span class="avatar-initial rounded bg-label-info"><i class="ri-projector-2-line"></i></span>
        </div>
        <h4 class="ms-1 mb-0">{{device.name}} {{sensor.state ? sensor.state : '-'}}%</h4>
      </div>
      <div class="d-flex align-items-center">
        <div class="avatar">
          <span class="avatar-initial rounded-50 bg-label-primary"><i class="ri-temp-cold-fill"></i></span>
        </div>
        <div class="ms-2">
          <small>Interior</small>
          <div><b>{{climate.attributes.current_temperature}}ºC</b></div>
        </div>
      </div>
    </div>
    <p class="mb-1">Temperatura pretendida: <b>{{climate.attributes.temperature}}ºC</b></p>
    <p class="my-4">
      <input type="range" class="form-range"
             [value]="climate.attributes.temperature"
             [min]="climate.attributes.min_temp"
             [max]="climate.attributes.max_temp"
             [step]="climate.attributes.target_temp_step"
             (input)="valueChanged($event, climate)"
             id="customRange2">
    </p>
    <div class="d-flex">
      @for (mode of climate.attributes.hvac_modes; track mode; let  i = $index) {
        @switch (mode) {
          @case ('off') {
            <div class="avatar xl flex-shrink-0 me-3" (click)="changeDeviceState(mode, climate)">
              <span class="avatar-initial rounded" [ngClass]="mode === climate.state ? 'bg-label-warning' : 'bg-label-secondary'">
                <i class="ri-shut-down-line"></i>
              </span>
            </div>
          }
          @case ('heat') {
            <div class="avatar xl flex-shrink-0 me-3" (click)="changeDeviceState(mode, climate)">
              <span class="avatar-initial rounded" [ngClass]="mode === climate.state ? 'bg-label-warning' : 'bg-label-secondary'">
                <i class="ri-fire-line"></i>
              </span>
            </div>
          }
          @case ('dry') {
            <div class="avatar xl flex-shrink-0 me-3" (click)="changeDeviceState(mode, climate)">
              <span class="avatar-initial rounded" [ngClass]="mode === climate.state ? 'bg-label-warning' : 'bg-label-secondary'">
                <i class="ri-water-flash-line"></i>
              </span>
            </div>
          }
          @case ('cool') {
            <div class="avatar xl flex-shrink-0 me-3" (click)="changeDeviceState(mode, climate)">
              <span class="avatar-initial rounded" [ngClass]="mode === climate.state ? 'bg-label-warning' : 'bg-label-secondary'">
                <i class="ri-windy-line"></i>
              </span>
            </div>
          }
        }
      }
    </div>
  </div>
</div>
